plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.9.22'
    id 'application'
    id 'org.ajoberstar.git-publish'
}

group = 'org.example'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.jetbrains.kotlin:kotlin-test'
}

test {
    useJUnitPlatform()
}

kotlin {
    jvmToolchain(8)
}

application {
    mainClassName = 'MainKt'
}

gitPublish {
    // where to publish to (repo must exist)
    repoUri = 'https://github.com/mira1zu/untitled1.git'
    // (or 'https://github.com/ajoberstar/test-repo.git', depending on authentication)

    // branch will be created if it doesn't exist
    branch = 'gh-pages'

    // if set, a shallow clone will be performed instead of pulling all history
    fetchDepth = null

    // what to publish, this is a standard CopySpec
    contents {
        from 'src/main/pages'
    }

    // what to keep in the existing branch (include=keep)
    preserve {
        include '**/**'
    }

    // message used when committing changes
    commitMessage = 'Publishing a new page' // defaults to 'Generated by gradle-git-publish'
}
